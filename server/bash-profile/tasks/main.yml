---
# Copy profiles to /etc/profile.d/
- include_tasks: ../../../functions/copy_etc-profile.d.yml

# Copy scripts to /usr/local/bin
- include_tasks: ../../../functions/copy_usr-local-bin.yml

# Rsync /etc/vim
- name: Synchronizing /etc/vim
  synchronize:
    src: files/vim/vim
    dest: /etc/
    delete: yes
    group: no
    owner: no
    rsync_opts:
      - "--exclude=.git"

- name: Sed /etc/vim/vimrc
  replace:
    path: /etc/vim/vimrc
    regexp: '~/.vim/plugged'
    replace: '/etc/vim/plugged'

- name: Symlink /usr/share/vim/vimfiles
  file:
    src: /etc/vim
    dest: /usr/share/vim/vimfiles
    owner: root
    group: root
    state: link
